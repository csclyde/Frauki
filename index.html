<!doctype html>
<html>
    <style>canvas { image-rendering: pixelated; cursor: none; margin: auto; } </style>
    <head>
        <meta charset="UTF-8" />
        <title>Frauki's Adventure!</title>

        <script>
            var cameraController;
            var inputController;
            var effectsController;
            var energyController;
            var audioController;
            var projectileController;
            var triggerController;
            var speechController;
            var objectController;

            var map;
            var frauki;
            var goddess;
            var speeches = {};
        </script>

        <script type="text/javascript" src="src/plugins/phaser.min.js"></script>
        <!-- <script type="text/javascript" src="src/plugins/phaser-debug.js"></script> -->
        <script type="text/javascript" src="src/plugins/Shims.js"></script>

        <script type="text/javascript" src="src/GameData.js"></script>
        <script type="text/javascript" src="src/data/FileMap.js"></script>
        <script type="text/javascript" src="src/data/FraukiDamageFrames.js"></script>
        <script type="text/javascript" src="src/data/SpeechesFrauki.js"></script>
        <script type="text/javascript" src="src/data/SpeechesGoddess.js"></script>
        <script type="text/javascript" src="src/data/Effects.js"></script>
        <script type="text/javascript" src="src/data/Menus.js"></script>
        <script type="text/javascript" src="src/data/Credits.js"></script>

        <script type="text/javascript" src="src/controllers/EventRouter.js"></script>
        <script type="text/javascript" src="src/controllers/TimerUtil.js"></script>
        <script type="text/javascript" src="src/controllers/ScriptRunner.js"></script>
            <script type="text/javascript" src="src/data/scripts/Demos.js"></script>
            <script type="text/javascript" src="src/data/scripts/Goddess.js"></script>
            <script type="text/javascript" src="src/data/scripts/GoddessChats.js"></script>
            <script type="text/javascript" src="src/data/scripts/GoddessGameover.js"></script>
            <script type="text/javascript" src="src/data/scripts/NPC.js"></script>
            <script type="text/javascript" src="src/data/scripts/Enemy.js"></script>
            <script type="text/javascript" src="src/data/scripts/BattleBar.js"></script>
            <script type="text/javascript" src="src/data/scripts/Gameplay.js"></script>
            <script type="text/javascript" src="src/data/scripts/Settings.js"></script>


        <script type="text/javascript" src="src/controllers/CameraController.js"></script>
        <script type="text/javascript" src="src/controllers/BackdropController.js"></script>
        <script type="text/javascript" src="src/controllers/AudioController.js"></script>
        <script type="text/javascript" src="src/controllers/InputController.js"></script>
        <script type="text/javascript" src="src/controllers/EffectsController.js"></script>
        <script type="text/javascript" src="src/controllers/EnergyController.js"></script>
        <script type="text/javascript" src="src/controllers/ProjectileController.js"></script>
        <script type="text/javascript" src="src/controllers/WeaponController.js"></script>
        <script type="text/javascript" src="src/controllers/SpeechController.js"></script>
        <script type="text/javascript" src="src/controllers/ObjectController.js"></script>

        <script type="text/javascript" src="src/controllers/TriggerController.js"></script>
            <script type="text/javascript" src="src/data/Triggers/Music.js"></script>
            <script type="text/javascript" src="src/data/Triggers/Effects.js"></script>
            <script type="text/javascript" src="src/data/Triggers/Actions.js"></script>



        <script type="text/javascript" src="src/BootState.js"></script>
        <script type="text/javascript" src="src/LoadingState.js"></script>
        <script type="text/javascript" src="src/SettingsState.js"></script>
        <script type="text/javascript" src="src/GameState.js"></script>

        <script type="text/javascript" src="src/Frogland.js"></script>
        <script type="text/javascript" src="src/Collision.js"></script>
        <script type="text/javascript" src="src/Frauki.js"></script>

        <script type="text/javascript" src="src/objects/EnemyBehavior.js"></script>
        <script type="text/javascript" src="src/objects/Enemy.js"></script>
            <script type="text/javascript" src="src/objects/enemies/Insectoid.js"></script>
            <script type="text/javascript" src="src/objects/enemies/Buzzar.js"></script>
            <script type="text/javascript" src="src/objects/enemies/Sporoid.js"></script>
            <script type="text/javascript" src="src/objects/enemies/Fungu.js"></script>
            <script type="text/javascript" src="src/objects/enemies/KR32.js"></script>
            <script type="text/javascript" src="src/objects/enemies/A3PZ.js"></script>
            <script type="text/javascript" src="src/objects/enemies/HWK9.js"></script>
            <script type="text/javascript" src="src/objects/enemies/GUBr.js"></script>
            <script type="text/javascript" src="src/objects/enemies/Goddess.js"></script>
            <script type="text/javascript" src="src/objects/enemies/H0P8.js"></script>
            <script type="text/javascript" src="src/objects/enemies/RKN1d.js"></script>
            <script type="text/javascript" src="src/objects/enemies/QL0k.js"></script>
            <script type="text/javascript" src="src/objects/enemies/SW8T.js"></script>
            <script type="text/javascript" src="src/objects/enemies/Hopper.js"></script>
            <script type="text/javascript" src="src/objects/enemies/SpikeDropper.js"></script>
            <script type="text/javascript" src="src/objects/enemies/Crabby.js"></script>
            <script type="text/javascript" src="src/objects/enemies/NPC.js"></script>

        <script type="text/javascript" src="src/objects/Door.js"></script>
        <script type="text/javascript" src="src/objects/Apple.js"></script>
        <script type="text/javascript" src="src/objects/Orb.js"></script>
        <script type="text/javascript" src="src/objects/ExpToken.js"></script>
        <script type="text/javascript" src="src/objects/Junk.js"></script>
        <script type="text/javascript" src="src/objects/Checkpoint.js"></script>
        <script type="text/javascript" src="src/objects/Upgrade.js"></script>
        <script type="text/javascript" src="src/objects/GemSucker.js"></script>

        <script>

            var pixel = { scale: 3, canvas: null, context: null, width: 640, height: 360 };

            if(window.innerWidth === 1920 && window.innerHeight === 1080) {
                pixel.scale = 3;
            }
            else if(window.innerWidth === 2560 && window.innerHeight === 1440) {
                pixel.scale = 3;
            }
            else if(window.innerWidth === 1366 && window.innerHeight === 768) {
                pixel.scale = 2;
            }
            else if(window.innerWidth === 1440 && window.innerHeight === 900) {
                pixel.scale = 2;
            }
            else if(window.innerWidth === 3840 && window.innerHeight === 2160) {
                pixel.scale = 4;
            }
            else if(window.innerWidth === 1600 && window.innerHeight === 900) {
                pixel.scale = 2;
            }
            else if(window.innerWidth === 1680 && window.innerHeight === 1050) {
                pixel.scale = 2;
            }
            else if(window.innerWidth === 1360 && window.innerHeight === 768) {
                pixel.scale = 2;
            }
            else {
                if(window.innerWidth < pixel.width * 2) {
                    pixel.scale = 1;
                } else if(window.innerWidth < pixel.width * 3) {
                    pixel.scale = 2;
                } else if(window.innerWidth < pixel.width * 4) {
                    pixel.scale = 3;
                } else {
                    pixel.scale = 4;
                }
            }



            // var hidden = "hidden";
            // // Standards:
            // if (hidden in document)
            //     document.addEventListener("visibilitychange", onchange);
            // else if ((hidden = "mozHidden") in document)
            //     document.addEventListener("mozvisibilitychange", onchange);
            // else if ((hidden = "webkitHidden") in document)
            //     document.addEventListener("webkitvisibilitychange", onchange);
            // else if ((hidden = "msHidden") in document)
            //     document.addEventListener("msvisibilitychange", onchange);
            // // IE 9 and lower:
            // else if ("onfocusin" in document)
            //     document.onfocusin = document.onfocusout = onchange;
            // // All others:
            // else
            //     window.onpageshow = window.onpagehide = window.onfocus = window.onblur = onchange;

            // function onchange(evt) {
            //     var v = "visible", h = "hidden",
            //     evtMap = {
            //         focus: v, focusin: v, pageshow: v, blur: h, focusout: h, pagehide: h
            //     };

            //     evt = evt || window.event;
            //     if (evt.type in evtMap)
            //         document.body.className = evtMap[evt.type];
            //     else
            //         document.body.className = this[hidden] ? "hidden" : "visible";
            //     if (game) {
            //         if (document.body.className.match(/hidden/)) {
            //             game.input.gamepad.stop();
            //         }
            //         else {
            //             game.input.gamepad.start();
            //         }
            //     }
            // }
            

            var game = new Phaser.Game(pixel.width, pixel.height, Phaser.AUTO, "game", LoadingState, false, false);
            var events = new EventRouter();

            game.state.add('BootState', BootState, true);
            game.state.add('LoadingState', LoadingState, false);
            game.state.add('SettingsState', SettingsState, false);
            game.state.add('GameState', GameState, false);


        </script>
    </head>
    <body style="background-color: black; overflow: hidden; margin: 0px;">

    </body>
</html>
