<!doctype html>
<html>
    <style>canvas { image-rendering: pixelated; cursor: none; margin: auto; } </style>
    <head>
        <meta charset="UTF-8" />
        <title>Frauki's Adventure!</title>

        <script>
            var cameraController;
            var inputController;
            var effectsController;
            var energyController;
            var audioController;
            var projectileController;
            var triggerController;
            var speechController;
            var objectController;

            var map;
            var frauki;
            var goddess;
            var speeches = {};
        </script>

        <script type="text/javascript" src="Src/Plugins/phaser.min.js"></script>
        <script type="text/javascript" src="Src/Plugins/phaser-debug.js"></script>
        <script type="text/javascript" src="Src/Plugins/Shims.js"></script>

        <script type="text/javascript" src="Src/GameData.js"></script>
        <script type="text/javascript" src="Src/Data/FileMap.js"></script>
        <script type="text/javascript" src="Src/Data/FraukiDamageFrames.js"></script>
        <script type="text/javascript" src="Src/Data/SpeechesFrauki.js"></script>
        <script type="text/javascript" src="Src/Data/SpeechesGoddess.js"></script>
        <script type="text/javascript" src="Src/Data/Effects.js"></script>
        <script type="text/javascript" src="Src/Data/Menus.js"></script>
        <script type="text/javascript" src="Src/Data/Credits.js"></script>

        <script type="text/javascript" src="Src/Controllers/EventRouter.js"></script>
        <script type="text/javascript" src="Src/Controllers/TimerUtil.js"></script>
        <script type="text/javascript" src="Src/Controllers/ScriptRunner.js"></script>
            <script type="text/javascript" src="Src/Data/Scripts/Demos.js"></script>
            <script type="text/javascript" src="Src/Data/Scripts/Goddess.js"></script>
            <script type="text/javascript" src="Src/Data/Scripts/GoddessChats.js"></script>
            <script type="text/javascript" src="Src/Data/Scripts/GoddessGameover.js"></script>
            <script type="text/javascript" src="Src/Data/Scripts/NPC.js"></script>
            <script type="text/javascript" src="Src/Data/Scripts/Enemy.js"></script>
            <script type="text/javascript" src="Src/Data/Scripts/Gameplay.js"></script>
            <script type="text/javascript" src="Src/Data/Scripts/Settings.js"></script>


        <script type="text/javascript" src="Src/Controllers/CameraController.js"></script>
        <script type="text/javascript" src="Src/Controllers/BackdropController.js"></script>
        <script type="text/javascript" src="Src/Controllers/AudioController.js"></script>
        <script type="text/javascript" src="Src/Controllers/InputController.js"></script>
        <script type="text/javascript" src="Src/Controllers/EffectsController.js"></script>
        <script type="text/javascript" src="Src/Controllers/EnergyController.js"></script>
        <script type="text/javascript" src="Src/Controllers/ProjectileController.js"></script>
        <script type="text/javascript" src="Src/Controllers/WeaponController.js"></script>
        <script type="text/javascript" src="Src/Controllers/SpeechController.js"></script>
        <script type="text/javascript" src="Src/Controllers/ObjectController.js"></script>

        <script type="text/javascript" src="Src/Controllers/TriggerController.js"></script>
            <script type="text/javascript" src="Src/Data/Triggers/Music.js"></script>
            <script type="text/javascript" src="Src/Data/Triggers/Effects.js"></script>
            <script type="text/javascript" src="Src/Data/Triggers/Actions.js"></script>



        <script type="text/javascript" src="Src/BootState.js"></script>
        <script type="text/javascript" src="Src/LoadingState.js"></script>
        <script type="text/javascript" src="Src/SettingsState.js"></script>
        <script type="text/javascript" src="Src/GameState.js"></script>

        <script type="text/javascript" src="Src/Frogland.js"></script>
        <script type="text/javascript" src="Src/Collision.js"></script>
        <script type="text/javascript" src="Src/Frauki.js"></script>

        <script type="text/javascript" src="Src/Objects/EnemyBehavior.js"></script>
        <script type="text/javascript" src="Src/Objects/Enemy.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/Insectoid.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/Buzzar.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/Sporoid.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/Fungu.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/KR32.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/A3PZ.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/HWK9.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/GUBr.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/Goddess.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/H0P8.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/RKN1d.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/QL0k.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/SW8T.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/Hopper.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/SpikeDropper.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/Crabby.js"></script>
            <script type="text/javascript" src="Src/Objects/Enemies/NPC.js"></script>

        <script type="text/javascript" src="Src/Objects/Door.js"></script>
        <script type="text/javascript" src="Src/Objects/Apple.js"></script>
        <script type="text/javascript" src="Src/Objects/Orb.js"></script>
        <script type="text/javascript" src="Src/Objects/Junk.js"></script>
        <script type="text/javascript" src="Src/Objects/Checkpoint.js"></script>
        <script type="text/javascript" src="Src/Objects/Upgrade.js"></script>
        <script type="text/javascript" src="Src/Objects/GemSucker.js"></script>

        <script>

            var pixel = { scale: 3, canvas: null, context: null, width: 640, height: 360 };

            if(window.innerWidth === 1920 && window.innerHeight === 1080) {
                pixel.scale = 3;
            }
            else if(window.innerWidth === 2560 && window.innerHeight === 1440) {
                pixel.scale = 3;
            }
            else if(window.innerWidth === 1366 && window.innerHeight === 768) {
                pixel.scale = 2;
            }
            else if(window.innerWidth === 1440 && window.innerHeight === 900) {
                pixel.scale = 2;
            }
            else if(window.innerWidth === 3840 && window.innerHeight === 2160) {
                pixel.scale = 4;
            }
            else if(window.innerWidth === 1600 && window.innerHeight === 900) {
                pixel.scale = 2;
            }
            else if(window.innerWidth === 1680 && window.innerHeight === 1050) {
                pixel.scale = 2;
            }
            else if(window.innerWidth === 1360 && window.innerHeight === 768) {
                pixel.scale = 2;
            }
            else {
                if(window.innerWidth < pixel.width * 2) {
                    pixel.scale = 1;
                } else if(window.innerWidth < pixel.width * 3) {
                    pixel.scale = 2;
                } else if(window.innerWidth < pixel.width * 4) {
                    pixel.scale = 3;
                } else {
                    pixel.scale = 4;
                }
            }



            var hidden = "hidden";
            // Standards:
            if (hidden in document)
                document.addEventListener("visibilitychange", onchange);
            else if ((hidden = "mozHidden") in document)
                document.addEventListener("mozvisibilitychange", onchange);
            else if ((hidden = "webkitHidden") in document)
                document.addEventListener("webkitvisibilitychange", onchange);
            else if ((hidden = "msHidden") in document)
                document.addEventListener("msvisibilitychange", onchange);
            // IE 9 and lower:
            else if ("onfocusin" in document)
                document.onfocusin = document.onfocusout = onchange;
            // All others:
            else
                window.onpageshow = window.onpagehide = window.onfocus = window.onblur = onchange;

            function onchange(evt) {
                var v = "visible", h = "hidden",
                evtMap = {
                    focus: v, focusin: v, pageshow: v, blur: h, focusout: h, pagehide: h
                };

                evt = evt || window.event;
                if (evt.type in evtMap)
                    document.body.className = evtMap[evt.type];
                else
                    document.body.className = this[hidden] ? "hidden" : "visible";
                if (game) {
                    if (document.body.className.match(/hidden/)) {
                        game.input.gamepad.stop();
                    }
                    else {
                        game.input.gamepad.start();
                    }
                }
            }
            

            var game = new Phaser.Game(pixel.width, pixel.height, Phaser.AUTO, "game", LoadingState, false, false);
            var events = new EventRouter();

            game.state.add('BootState', BootState, true);
            game.state.add('LoadingState', LoadingState, false);
            game.state.add('SettingsState', SettingsState, false);
            game.state.add('GameState', GameState, false);


        </script>
    </head>
    <body style="background-color: black; overflow: hidden; margin: 0px;">

    </body>
</html>
